# [텀 프로젝트(9466번)](https://www.acmicpc.net/problem/9466)

## 문제  
이번 가을학기에 '문제 해결' 강의를 신청한 학생들은 텀 프로젝트를 수행해야 한다. 프로젝트 팀원 수에는 제한이 없다. 심지어 모든 학생들이 동일한 팀의 팀원인 경우와 같이 한 팀만 있을 수도 있다. 프로젝트 팀을 구성하기 위해, 모든 학생들은 프로젝트를 함께하고 싶은 학생을 선택해야 한다. (단, 단 한 명만 선택할 수 있다.) 혼자 하고 싶어하는 학생은 자기 자신을 선택하는 것도 가능하다.

학생들이(s1, s2, ..., sr)이라 할 때, r=1이고 s1이 s1을 선택하는 경우나, s1이 s2를 선택하고, s2가 s3를 선택하고,..., sr-1이 sr을 선택하고, sr이 s1을 선택하는 경우에만 한 팀이 될 수 있다.

예를 들어, 한 반에 7명의 학생이 있다고 하자. 학생들을 1번부터 7번으로 표현할 때, 선택의 결과는 다음과 같다.

~~~
1	2	3	4	5	6	7   //자신의 번호
3	1	3	7	3	4	6   //선택한 학생 번호
~~~

위의 결과를 통해 (3)과 (4, 7, 6)이 팀을 이룰 수 있다. 1, 2, 5는 어느 팀에도 속하지 않는다.

주어진 선택의 결과를 보고 어느 프로젝트 팀에도 속하지 않는 학생들의 수를 계산하는 프로그램을 작성하라.

## 입력
첫째 줄에 테스트 케이스의 개수 T가 주어진다. 각 테스트 케이스의 첫 줄에는 학생의 수가 정수 n (2 ≤ n ≤ 100,000)으로 주어진다. 각 테스트 케이스의 둘째 줄에는 선택된 학생들의 번호가 주어진다. (모든 학생들은 1부터 n까지 번호가 부여된다.)

## 풀이
dfs를 통해 방향 그래프를 탐색하는 문제이다. 한번의 dfs를 시작할때, 사이클의 유무를 판단하는 것이 이 문제의 핵심이다.  

노드의 개수가 최대 10만이므로, 인접행렬로 그래프를 표현하면 시간초과가 난다. 하나의 노드는 또 다른 하나의 노드만을 가리킬 수 있으므로, 구조체 타입의 노드를 담는 일차원 배열(최대 크기 10만)을 사용하도록 했다.  

만약 사이클을 이루는 노드의 개수를 cnt이라고 하면, 전체 노드의 개수인 N에서 cnt를 빼면 사이클이 아닌 노드의 개수, 즉 문제의 정답을 구할 수 있다.

노드 구조체
~~~
struct Node {
	int next;
	bool visited = false, isFinished = false;

	Node(int next) {
		this->next = next;
	}
	
	Node() {}
};
~~~
여기서 중요한 것은 방문체크 뿐만 아니라, 사이클 판단을 위해 isFinised라는 변수를 하나 더 선언한 것이다. 이 친구의 역할은 다음과 같다.  
1. 시작 노드를 포함한 사이클이 존재하는 경우  

2. 시작 노드를 포함하지 않고, 시작 노드가 가리키는 노드를 (혹은 그 노드가 또 다시 가리키는//반복) 포함한 사이클이 존재하는 경우

1번의 경우 탐색의 마지막은 시작노드 자기 자신이 되므로, 이미 시작에서 방문체크를 true한 이후다. 이는, 하나의 사이클이 종료되는 시점이며, isFinished가 false라면, 다시 한번 사이클을 돌면서 사이클을 이루는 노드들의 개수를 세도록 하면 된다.  

2번의 경우 사이클을 이루는 첫 번째 노드는 1번의 로직을 따르게 된다. 그러나, 시작 노드를 포함한 사이클을 이루지 않는 노드들은 팀을 이룰 수 없으므로, 다음 dfs탐색 시에 고려하지 않도록 isFinished를 true로 바꿔주어야 한다.

결론은, isFinished가 true인 노드는 더 이상 사이클 유무를 판단할 필요가 없는 노드를 의미하는 것이다.

## [소스코드](https://github.com/foreverever/baekjoon/blob/master/baekjoon/%ED%85%80%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8(9466).cpp)

## 부족한 부분
이틀을 넘게 시간초과로 인해 풀지 못했던 문제이다. 기존 방식은 모든 노드를 dfs를 돌게 끔 했었다.  

사이클을 이루는 첫번째 노드만 체크를 하다보니 중복해서 dfs탐색을 하는 경우가 발생했다.  

이를 해결하기위해 isFinished라는 변수 하나를 더 생성했다. 사실, 인터넷에 힌트를 보고 구현하였다. (도저히 생각이 안나기에..ㅠㅠ) 그래프의 사이클 판단을 어떻게 해야 할지 감을 못잡았던 것 같다. 다양한 유형의 그래프 문제를 자주 풀도록 해야겠다.

## 내일 할 일
- 삼성 알고리즘 1문제
- 인적성 공부
- 웹 공부